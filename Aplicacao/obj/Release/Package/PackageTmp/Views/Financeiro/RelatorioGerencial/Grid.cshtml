<!-- /.box-header -->
@using BEAN;

<form role="form" id="frmRelatorioGerencialGrid">
    <div class="box-body table-responsive no-padding" id="divResultadoBusca">

        <table class="table table-bordered table-striped">
            <tr>
                <td align="center"><h3 class="box-title">Filtros Utilizados</h3><br /> @Html.Raw(Model.FiltrosUtilizados)</h3></td>
            </tr>
        </table>

        <table class="table table-bordered table-striped">
            <tbody>
                <tr>
                    <th style="width: 10px"><input type="checkbox" name="SelecionarTodos" onclick="selecionarTodos();" /></th>
                    <th style="width: 10px">Data</th>
                    <th>Ação</th>
                    <th>Favorecido</th><!--4-->
                    <th>Principal</th>
                    <th>Recebimento</th>
                    <th>Sucumbência</th><!--7-->
                    <th>Assessoria</th>
                    <th>Pagamento<br />Cliente</th>
                    <th>Prestação<br />de Contas</th>
                    <th>Saldo</th>

                </tr>

                @if (Model != null && Model.Contas != null)
                {
                    double vTotalSucumbencia = 0;
                    double vTotalAssessoriaPagamento = 0;
                    double vTotalSaldo = 0;
                    double vTotalPagamentos = 0;
                    double vTotalRecebimento = 0;
                    double vTotalPrincipal = 0;
                    int i = 0;

                    foreach (var item in Model.Contas)
                    {
                        <tr class="cpointer">
                            <td><input type="hidden" id="CodigoAcao_@i" name="CodigoAcao_@i" value="@item.CodigoAcao" />
                            
                                <input type="checkbox" name="Codigo_@i" value="@i" onclick="calculaSelecionados();" alt="Valor" /></td>
                            @*<td align="center">@(Model.BuscaDataVencimentoDe != null ? string.Format("{0:dd/MM/yyyy}", Model.BuscaDataVencimentoDe) : "")</td>*@
                            <td align="center">@(item.DataRecebimento != null ? string.Format("{0:dd/MM/yyyy}", item.DataRecebimento) : "")</td>
                            <td>@item.Numeracao</td>
                            <td>@item.Cliente</td>
                            <td align="right">@string.Format("{0:n2}", Convert.ToDouble(item.Principal))</td>
                            <td align="right">@string.Format("{0:n2}", Convert.ToDouble(item.Recebimento))</td>
                            <td align="right">@string.Format("{0:n2}", Convert.ToDouble(item.Sucumbencia))</td>
                            <td>@item.Assessoria</td>
                            <td align="right">@string.Format("{0:n2}", Convert.ToDouble(item.Pagamentos))</td>
                            <td align="right">@string.Format("{0:n2}", Convert.ToDouble(item.AssessoriaPagamento))</td>

                            <td align="right">
                                @string.Format("{0:n2}", Convert.ToDouble(item.Saldo))
                                <input type="hidden" id="Principal_@i" name="Principal_@i" value="@item.Principal" />
                                <input type="hidden" id="Sucumbencia_@i" name="Sucumbencia_@i" value="@item.Sucumbencia" />
                            </td>
                        </tr>

                        vTotalSucumbencia += Convert.ToDouble(item.Sucumbencia);
                        vTotalPagamentos += Convert.ToDouble(item.Pagamentos);
                        vTotalAssessoriaPagamento += Convert.ToDouble(item.AssessoriaPagamento);
                        vTotalRecebimento += Convert.ToDouble(item.Recebimento);
                        vTotalPrincipal += Convert.ToDouble(item.Principal);
                        vTotalSaldo += Convert.ToDouble(item.Saldo);
                        i++;
                    }

                    <tr>
                        <td></td>
                        <td></td>
                        <td>
                            <button type="button" id="BotaoGerarCp" class="btn btn-openid" data-toggle="modal" data-target="#modal-cp" value="Ge">Gerar Contas Pagar - Assessoria</button>
                            <input type="hidden" id="TotalSelecionado" name="TotalSelecionado" value="0" />
                        </td>
                        <td><input type="hidden" id="QtdeFiltrado" name="QtdeFiltrado" value="@i" />Total</td><!--4-->
                        <td align="right">@string.Format("{0:n2}", vTotalPrincipal)</td>
                        <td align="right">@string.Format("{0:n2}", vTotalRecebimento)</td>
                        <td align="right">@string.Format("{0:n2}", vTotalSucumbencia)</td>
                        <td align="right">@string.Format("{0:n2}", vTotalAssessoriaPagamento)</td>
                        <td align="right">@string.Format("{0:n2}", vTotalPagamentos)</td>
                        <td align="right"></td>
                        <td align="right">@string.Format("{0:n2}", vTotalSaldo)</td>

                    </tr>
                }

            </tbody>
        </table>
    </div>
</form>